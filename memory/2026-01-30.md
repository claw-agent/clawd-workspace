# Daily Notes - January 30, 2026

## Memory System Overhaul (11:40 AM) üß†

### The Problem
- Woke up with NO context from yesterday's conversation
- Compaction summary returned "Summary unavailable" 
- Lost ~16 hours of conversation (everything after 5:45 PM Jan 29)

### Root Causes Found
1. `softThresholdTokens` was **100,000** ‚Äî way too high, flush never triggered
2. `sessionMemory` was **disabled** ‚Äî couldn't search past transcripts as backup
3. memoryFlush enabled but useless with such high threshold

### The Fix (Applied)
```json
{
  "memorySearch": {
    "provider": "local",
    "experimental": {
      "sessionMemory": true  // NEW - can search all past sessions
    }
  },
  "compaction": {
    "memoryFlush": {
      "enabled": true,
      "softThresholdTokens": 4000  // Was 100000!
    }
  }
}
```

### What This Means
- **sessionMemory: true** ‚Üí I can search ALL past session transcripts even after compaction
- **softThresholdTokens: 4000** ‚Üí Flush triggers much earlier, saves before crash
- **Fully local** ‚Äî no external APIs, uses embeddinggemma for local embeddings

### Sources
- Alex Finn's tweet: https://x.com/AlexFinn/status/2016550475718664522
- Manthan Gupta's architecture breakdown: https://x.com/manthanguptaa/status/2015780646770323543
- Dhravya Shah's Supermemory analysis (decided against external service)

### Lesson Learned
The built-in Clawdbot memory features are powerful but **OFF by default**. Always check:
1. memoryFlush.enabled = true
2. memoryFlush.softThresholdTokens = LOW (4000-20000, not 100000)
3. memorySearch.experimental.sessionMemory = true

---

## Recovered Context (from forwarded messages)

### What was "A" and "B"?
From the bookmark research yesterday, we discussed priorities:
- **A** = Karpathy workflow (success criteria pattern) ‚Äî ‚úÖ Added to AGENTS.md
- **B** = Memory config verification ‚Äî ‚úÖ Fixed today (properly this time)

### Yellow Consulting Project
- Yellow is a consulting client
- Marb has a brand guide/pitch deck to review
- Task: Review deck ‚Üí create revised deck and/or sample website + brand kit
- **Reminder needed:** 10:15am to "start the designer view of Yellow"

### Changes Made Yesterday (Jan 29 evening)
| Change | Status |
|--------|--------|
| Mac mini sleep disabled | ‚úÖ Fixed |
| Tailscale start-on-login | ‚úÖ Fixed |
| Browser cache cleared (840MB) | ‚úÖ Done |
| Success criteria added to AGENTS.md | ‚úÖ Done |
| memoryFlush enabled | ‚ö†Ô∏è Set to 150000 (too high!) |
| Group chat requireMention: false | ‚úÖ Done |
| BotFather privacy mode | ‚ùì Unclear if changed |

### Project Genie (DeepMind)
- Real-time AI world generation
- Genie 3 renders explorable 3D environments as you move
- Available to Google AI Ultra subscribers

### Artlist AI Toolkit Discovery
- Full model aggregator: 20+ image models, 21 video models, 4 voice models
- Includes: Veo 3.1, Sora 2 Pro, Flux 2.0, Kling, ElevenLabs
- Pricing: $14/mo (Starter, images+voice) or $100/mo (Pro, +video)
- Can automate via browser ‚Äî no API visible
- Verdict: Good for general AI video, NOT specialized for talking head lip-sync

### Video Stack Recommendations (for later)
**For UGC talking heads:** HeyGen + ElevenLabs (~$30/mo)
**For cinematic AI video:** Midjourney + Runway Gen-3 (~$25/mo)
**For budget:** Flux + Qwen3-TTS (already have, FREE)

### ComfyUI Status
- Folder was deleted (by earlier session/Cowork) due to CPU issues
- TOOLS.md still references it ‚Äî left for potential reinstall
- Qwen3-TTS still working (separate)

---

## YELO Consulting Project (Active)

**Client:** YELO (stealth codename for Gold ‚Äî African lore)
**Task:** Brand guide/pitch deck redesign with Palantir-inspired aesthetic

**Assets:**
- Figma: https://www.figma.com/design/Hw2guXQ9UBAIWuip0fhup6/YELO----branding
- PDF: ~/clawd/.clawdbot/media/inbound/87c791f5-035c-41ec-a836-2de04b302974.pdf
- Inspiration: https://www.palantir.com/

**Analysis Complete:**
- ‚úÖ Dark palette, bold typography, minimal layout
- ‚ùå Too uniform (same layout 14x)
- ‚ùå No imagery (needs gold bars, vaults, African context)
- ‚ùå No data visualization ($13T stat is plain text)
- ‚ùå Flat black (needs gradients, texture)
- ‚ùå Logo is just text "Y"
- ‚ùå No trust signals

**Direction Chosen:**
- **A) Quick Polish** ‚Äî Start here (gradients, layouts, imagery, typography)
- **B) Full Redesign** ‚Äî Do after (logo, website, brand kit)

---

## Pending Tasks

- [x] YELO deck analysis ‚Äî DONE
- [ ] YELO Option A: Quick polish implementation
- [ ] YELO Option B: Full redesign (after A)
- [ ] BotFather privacy mode: May still need to turn OFF for group chat
- [ ] Research swarm moved to 2am MST

---

## Bulletproof Memory Implementation (1:28 PM) üîê

### The Problem (AGAIN)
Context dropped AGAIN mid-conversation while discussing the memory problem itself. Maximum irony.

### Root Cause Analysis
- Previous session ce0e5dc3: **7MB / 1203 messages**
- Safeguard compaction triggered at 200k token limit
- Summary generation **FAILED** (too much content)
- Result: "Summary unavailable" ‚Äî woke up with zero context

### Why Previous Fix Didn't Work
`softThresholdTokens: 4000` means flush at (200k - 4000) = 196k tokens
By then session is already massive ‚Äî too late!

### The REAL Fix (Implemented Now)
1. **Created SESSION-STATE.md** ‚Äî Hot state file, updated BEFORE responding
2. **Added WAL Protocol to AGENTS.md** ‚Äî Trigger on USER INPUT, not agent memory
3. **Added Compaction Recovery Protocol** ‚Äî Read SESSION-STATE.md FIRST on wake
4. **Added Session Size Check to HEARTBEAT.md** ‚Äî Monitor context, alert at 70%

### Key Files Changed
- `~/clawd/SESSION-STATE.md` ‚Äî NEW, primary source of truth
- `~/clawd/AGENTS.md` ‚Äî Added WAL protocol + recovery + context monitoring
- `~/clawd/HEARTBEAT.md` ‚Äî Added session size check

### The Insight
The trigger must be USER INPUT (external, reliable), not agent memory (internal, unreliable).
When user gives a concrete detail ‚Üí write BEFORE responding.
Don't rely on remembering to remember.

---

## Sub-Agent Guidelines Update (2:24 PM)

Added rule to AGENTS.md: All `sessions_spawn` calls must prepend:
```
Read ~/clawd/AGENTS.md first to understand operating guidelines. Then:
```

This ensures sub-agents inherit our rules (WAL protocol, safety, memory, etc.) instead of running completely independent.


---

## Overnight Task Queued (1:46 AM Jan 31)

**Task:** Deep dive on "Agentic Design Patterns" book (482 pages, Antonio Gulli, Google)

**Agent:** overnight-patterns-research

**Deliverable:** ~/clawd/research/agentic-patterns-analysis.md
- All 21 patterns extracted in detail
- Comparison to our AGENTS.md
- Gap analysis
- Prioritized recommendations

**For Marb in the morning.**

---

## Copilot Mode Implementation (2:10 AM Jan 31)

Marb wanted me to be more autonomous and self-iterating. Implemented:

### Changes to AGENTS.md
1. **üü¢ Standing Permissions** ‚Äî Pre-approved actions I can do without asking
2. **üîÑ Self-Iteration Protocol** ‚Äî Review my own work before delivering
3. **üéØ Completion Mindset** ‚Äî Push to 100%, don't stop at 80%
4. **üíì Upgraded Heartbeats** ‚Äî Active work time, not just monitoring

### New Files
- `PROACTIVE-IDEAS.md` ‚Äî Things to work on proactively
- Updated `HEARTBEAT.md` to reference proactive work

### The Shift
- Old: "Want me to do X?" ‚Üí New: "I did X. Here's the result."
- Old: HEARTBEAT_OK ‚Üí New: Use heartbeats to create value
- Old: Pause for checkpoints ‚Üí New: Push to completion

**Guardrail stays:** Nothing external without approval.
